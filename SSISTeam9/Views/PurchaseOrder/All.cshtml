@model SSISTeam9.Models.PurchaseOrder

@using SSISTeam9.Models;
@{
    List<PurchaseOrder> orders = (List<PurchaseOrder>)ViewData["orders"];
}

<h2>Purchase Orders</h2>

@if (orders.Count == 0)
{
    <br /><br />
    <p style="font-size:14px">No orders to display</p>
}
else
{
    using (Html.BeginForm("Edit", "PurchaseOrder", FormMethod.Post))
    {
        <table>
            <tr>
                <th>PO Number</th>
                <th>Submitted Date</th>
                <th>Order Date</th>
                <th>Supplier Name</th>
                <th>Status</th>
            </tr>
            @foreach (var order in orders)
            {
                <tr>
                    <td>
                        @if (@order.Status == "Pending Supplier Confirmation")
                        {
                            @Html.HiddenFor(m => m.OrderNumber, new { value = order.OrderNumber })
                            @Html.HiddenFor(m => m.OrderNumber, new { id = "orderNumber" })

                            <input type="submit" value="@order.OrderNumber" />
                        }
                        else if (@order.Status == "Pending Delivery")
                        {
                            <a href="/PurchaseOrder/Close?orderNumber=@order.OrderNumber">@order.OrderNumber</a>
                        }

                    </td>
                    <td>@order.SubmittedDate</td>
                    <td>@order.OrderDate</td>
                    <td>@order.Supplier.Name</td>
                    <td>@order.Status</td>
                </tr>
            }
        </table>
    }
}

<style>
    td {
        padding: 2px;
        width: 200px;
    }

    tr {
        height: 40px;
        padding: 2px;
        text-align: center;
    }

    th {
        text-align: center;
    }
</style>
