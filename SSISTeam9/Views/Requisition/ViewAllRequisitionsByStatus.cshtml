
@using SSISTeam9.Models
@{
    var outstandingrequisitions = (List<Requisition>)ViewData["outstandingReqs"];
    
    var sessionId = ViewData["sessionId"];

}

    <script language="JavaScript">
        function toggle(source) {
            checkboxes = document.getElementsByName('requisition');
            for (var i = 0, n = checkboxes.length; i < n; i++) {
                checkboxes[i].checked = source.checked;
            }
        }
    </script>
   

    <select onchange="location = this.options[this.selectedIndex].value;">
        <option>Select</option>
        <option value="/Requisition/ViewAllOutstandingRequisitions?status=Outstanding">Outstanding</option>
        <option value="/Requisition/ViewAllOutstandingRequisitions?status=Completed">Completed</option>
    </select>
    <form action="/RetrievalForm/ViewRetrievalForm" method="get">
        <input type="submit" value="View RetrievalForm" />
    </form>
    
    <form action="/RetrievalForm/CreateRetrievalForm" method="post">
        @if (outstandingrequisitions[0].Status != "Completed")
        {
            <input type="submit" value="Assign to Collection" />
        }

        <table>
            <tr>
                <th>
                    @if (outstandingrequisitions[0].Status != "Completed")
                    {<input type="checkbox" onClick="toggle(this)" />
                    }
                </th>
                <th>Requisition Id</th>
                <th>Department</th>
                <th>Date of Request</th>
            </tr>
            @foreach (var req in outstandingrequisitions)
            {
                <tr>

                    <td>
                        @if (req.Status != "Completed")
                        {
                            <input type="checkbox" name="requisition" value="@req.ReqId">
                        }
                    </td>
                    <td>@req.ReqCode</td>
                    <td>@req.Employee.Department.DeptCode</td>
                    <td>@req.DateOfRequest</td>
                </tr>
            }
        </table>
    </form>


